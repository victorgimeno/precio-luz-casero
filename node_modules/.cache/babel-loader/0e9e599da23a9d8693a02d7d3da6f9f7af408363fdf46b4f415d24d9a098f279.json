{"ast":null,"code":"import{useState,useEffect}from'react';import{Line}from'react-chartjs-2';import'chart.js/auto';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const password=\"micontrase√±a123\";export default function App(){const[accesoPermitido,setAccesoPermitido]=useState(false);const[intento,setIntento]=useState(\"\");const[precios,setPrecios]=useState([]);const[horas,setHoras]=useState([]);useEffect(()=>{fetch('https://raw.githubusercontent.com/datasets/energy-prices/main/data/electricity-prices.csv').then(res=>res.text()).then(csv=>{const rows=csv.split('\\n').slice(1,9);// ejemplo con 8 horas\nconst h=[];const p=[];rows.forEach(row=>{const parts=row.split(',');h.push(parts[0].split(' ')[1]);p.push(parseFloat(parts[1])||0.12);});setHoras(h);setPrecios(p);});},[]);const mejorHora=horas[precios.indexOf(Math.min(...precios))]||\"desconocida\";const precioActual=precios[0]||0.12;const handleLogin=()=>{if(intento===password)setAccesoPermitido(true);else alert(\"Contrase√±a incorrecta\");};if(!accesoPermitido){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',padding:20},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Introduce la contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:intento,onChange:e=>setIntento(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,children:\"Entrar\"})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Precio actual de la luz\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDD0C \",new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}),\" \\u2192 \",precioActual.toFixed(3),\" \\u20AC/kWh\"]}),/*#__PURE__*/_jsx(\"p\",{style:{color:precioActual<0.10?'green':precioActual<0.14?'orange':'red'},children:precioActual<0.10?'¬°Buen momento para consumir!':precioActual<0.14?'Precio medio, puedes esperar':'Precio alto, mejor espera'}),/*#__PURE__*/_jsx(\"h2\",{children:\"Precios por hora\"}),/*#__PURE__*/_jsx(Line,{data:{labels:horas,datasets:[{label:'‚Ç¨/kWh',data:precios,borderColor:'#3b82f6',backgroundColor:'rgba(59, 130, 246, 0.2)'}]}}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:20},children:[\"\\u23F1\\uFE0F Mejor hora para consumir hoy: \",/*#__PURE__*/_jsx(\"strong\",{children:mejorHora})]})]});}","map":{"version":3,"names":["useState","useEffect","Line","jsx","_jsx","jsxs","_jsxs","password","App","accesoPermitido","setAccesoPermitido","intento","setIntento","precios","setPrecios","horas","setHoras","fetch","then","res","text","csv","rows","split","slice","h","p","forEach","row","parts","push","parseFloat","mejorHora","indexOf","Math","min","precioActual","handleLogin","alert","style","display","flexDirection","alignItems","padding","children","type","value","onChange","e","target","onClick","Date","toLocaleTimeString","hour","minute","toFixed","color","data","labels","datasets","label","borderColor","backgroundColor","marginTop"],"sources":["/workspaces/precio-luz-casero/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport 'chart.js/auto';\n\nconst password = \"micontrase√±a123\";\n\nexport default function App() {\n  const [accesoPermitido, setAccesoPermitido] = useState(false);\n  const [intento, setIntento] = useState(\"\");\n  const [precios, setPrecios] = useState([]);\n  const [horas, setHoras] = useState([]);\n\n  useEffect(() => {\n    fetch('https://raw.githubusercontent.com/datasets/energy-prices/main/data/electricity-prices.csv')\n      .then(res => res.text())\n      .then(csv => {\n        const rows = csv.split('\\n').slice(1, 9); // ejemplo con 8 horas\n        const h = [];\n        const p = [];\n        rows.forEach(row => {\n          const parts = row.split(',');\n          h.push(parts[0].split(' ')[1]);\n          p.push(parseFloat(parts[1]) || 0.12);\n        });\n        setHoras(h);\n        setPrecios(p);\n      });\n  }, []);\n\n  const mejorHora = horas[precios.indexOf(Math.min(...precios))] || \"desconocida\";\n  const precioActual = precios[0] || 0.12;\n\n  const handleLogin = () => {\n    if (intento === password) setAccesoPermitido(true);\n    else alert(\"Contrase√±a incorrecta\");\n  };\n\n  if (!accesoPermitido) {\n    return (\n      <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', padding: 20 }}>\n        <h1>Introduce la contrase√±a</h1>\n        <input type=\"password\" value={intento} onChange={(e) => setIntento(e.target.value)} />\n        <button onClick={handleLogin}>Entrar</button>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ padding: 20 }}>\n      <h1>Precio actual de la luz</h1>\n      <p>\n        üîå {new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} ‚Üí {precioActual.toFixed(3)} ‚Ç¨/kWh\n      </p>\n      <p style={{\n        color: precioActual < 0.10 ? 'green' : precioActual < 0.14 ? 'orange' : 'red'\n      }}>\n        {precioActual < 0.10\n          ? '¬°Buen momento para consumir!'\n          : precioActual < 0.14\n          ? 'Precio medio, puedes esperar'\n          : 'Precio alto, mejor espera'}\n      </p>\n\n      <h2>Precios por hora</h2>\n      <Line data={{\n        labels: horas,\n        datasets: [{\n          label: '‚Ç¨/kWh',\n          data: precios,\n          borderColor: '#3b82f6',\n          backgroundColor: 'rgba(59, 130, 246, 0.2)',\n        }],\n      }} />\n\n      <p style={{ marginTop: 20 }}>\n        ‚è±Ô∏è Mejor hora para consumir hoy: <strong>{mejorHora}</strong>\n      </p>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}